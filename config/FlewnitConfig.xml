<!-- -->

<flewnitGlobalConfig>

	<!-- convention: lower case names for everythin but proper names and class names -->

	<generalSettings>		

	    <doValidateSimulationStepResults type="BOOL" value="false" />		
	    <doProfileAndOptimizeSettings type="BOOL" value="false" />		
	    <doProfilePerformance type="BOOL" value="false" />		
	    
	    <doDebugDraw type="BOOL" value="true" />		
	
	
		<!--
		<pathToData type="STRING" value="." />
		<simulationPipelineConfig type="STRING" value="SimulationPipeLineConfig.xml"/>
		<sceneAnnotationsFile type="STRING" value="LakeSceneAnnotations.xml" />
		<disableMemoryTrackingLogging type="BOOL" value="true"/>
		-->

	</generalSettings>
	
	<scenes>

	  <scenesGlobalSettings>
		  <tesselateMeshesWithDisplacementMap type="BOOL" value="true" />		
		 
		 <environmentMap type="STRING" value="./assets/textures/cubeMaps/evening.jpg" /> 
	
  		<referenceCountThresholdForInstancedRendering type="INT" value="8" />
		</scenesGlobalSettings>
		
		<Scene>
		  <Type type="STRING" value="HardCodedScene"/>

  		  <SceneNode>
			  <Type type="STRING" value="PURE_NODE"/>
			  <name type="STRING" value="hardCodedSceneRootNode" />
			  
			  <position type="VEC3" x="-75.0" y="0.0" z="-0.0" />
			  <direction type="VEC3" x="0.0" y="0.0" z="-1.0" />
			  <up type="VEC3" x="0.0" y="1.0" z="0.0" />				
			  <scale type="FLOAT" value="1.0"/>	
     	  </SceneNode>  
      
		</Scene>

		<Scene>
		  <Type type="STRING" value="SceneFile"/>
  		<sceneFile type="STRING" value="./assets/blendfiles/raptor/raptor_11k_FacesNormalDisp_NoPackedTextures.blend" />		
  		
  		<SceneNode>
			  <Type type="STRING" value="PURE_NODE"/>
			  <name type="STRING" value="blendFileSceneRootNode" />
			  <position type="VEC3" x="0.0" y="-15.0" z="-70.0" />
			  <direction type="VEC3" x="0.0" y="-1.0" z="0.0" />
			  <up type="VEC3" x="0.0" y="0.0" z="-1.0" />				
			  <scale type="FLOAT" value="1."/>	
			</SceneNode>  
			  
		</Scene>	
	

	
	</scenes>


	<UI_Settings>

		<windowSettings>

			<mediaLayer type="STRING" value="GLFW" />

			<windowTitle type="STRING" value="Flewnit" />

			<fullScreen type="BOOL" value="false"/>

			<enforceCustomResolutionInFullScreen type="BOOL" value="false" />

			<resolution type="VEC2I" x="640" y="480" GUIVisibility="read" tweakConfigString="TODO"/>
			<position type="VEC2I" x="400" y="100" GUIVisibility="read" tweakConfigString="TODO"/>
			
			<numMultiSamples type="INT" value ="4" />
			
		</windowSettings>
		
		
		<OpenGL_Settings>
			<contextVersion type="VEC2I" x="4" y="1" />
			<enforceCoreProfile type="BOOL" value="true" />
		</OpenGL_Settings>
		
		
		<OpenCL_Settings>
			<contextVersion type="VEC2I" x="1" y="0" />	
			<deviceType type="STRING" value="GPU" />
		</OpenCL_Settings>

		
		<inputSettings>

			<grabMouse type="BOOL" value="false" />

			<enableWiimote type="BOOL" value="false" />

		</inputSettings>


		<!-- maybe GUI config to come... -->

	</UI_Settings>



	<simulators>
		<!--  -->

		<Simulator>
			<Type type="STRING" value="MechanicsSimulator"/>


			
			
			
			
			<SimulationPipelineStage>
				<Type type="STRING" value="ParticleMechanicsStage"/>
				
				<generalSettings>

				  <numMaxParticles type="INT" value="65536" GUIVisibility="read/write" tweakConfigString="TODO"/>
				  <SPHSupportRadius type="FLOAT" value="1.5"		GUIVisibility="read/write" tweakConfigString="TODO"/>
 
          <numMaxFluids type="INT" value="1" GUIVisibility="read/write" tweakConfigString="TODO"/>
          <!-- zero is a legitimate value to indicate that no rigid bodies are wanted -->
          <numMaxRigidBodies type="INT" value="0" GUIVisibility="read/write" tweakConfigString="TODO"/>
          <!-- be careful with this value: the maximum may be hardware/implementation dependent and hence may be clamped;
               GT200: max 256; Fermi: Max 1024; reason: scarce local memory, hence value reloading for greater particle counts; -->
				  <numMaxParticlesPerRigidBody type="INT" value="1024" GUIVisibility="read/write" tweakConfigString="TODO"/>



				  <particleMass type="FLOAT" value="1.0" GUIVisibility="read/write" tweakConfigString="TODO"/>


				  <particleMass type="FLOAT" value="0.5" GUIVisibility="read/write"	tweakConfigString="TODO"/>



          <!--
				  <targetMinSimulationStepsPerSecond type="INT" value="60" GUIVisibility="read/write"	tweakConfigString="TODO"/>
				  <particelizeBordersOnly type="BOOL" value ="false" GUIVisibility="read" tweakConfigString="TODO"/>
          -->
			  </generalSettings>
			  
			  <!-- it may be no good style  to scatter the scene definitions, but time pressure forces me to do so ;( -->
			  <particleScene>

        </particleScene>
			
			
			</SimulationPipelineStage>





		</Simulator>

		<Simulator>
			<Type type="STRING" value="LightingSimulator"/>

			<generalSettings>
				<Camera>
					<position type="VEC3" x="0.0" y="0.0" z="10.0" />
					<direction type="VEC3" x="0.0" y="0.0" z="-1.0" />
					<up type="VEC3" x="0.0" y="1.0" z="0.0" />				
					<openingAngleVerticalDegrees type="FLOAT" value="45.0"/>
					<movementSpeed type="FLOAT" value="0.5"/>		
				</Camera>
				
				<polygonMode type="STRING" value="FILL"/>
				
				<supportedShadingFeatures>
				  <directLighting type="BOOL" value="true"/>
				  <diffuseTexturing type="BOOL" value="true"/>
				  <normalMapping type="BOOL" value="true"/>
				  <cubeMapping type="BOOL" value="true"/>
				  <tessellation type="BOOL" value="true"/>				
				</supportedShadingFeatures>
								

				<GlobalShadingFeatures>
					
					<!-- -->
					<lightSourcesLightingFeature type="STRING" value="LIGHT_SOURCES_LIGHTING_FEATURE_ALL_SPOT_LIGHTS"/>
					<lightSourcesShadowFeature type="STRING" value="LIGHT_SOURCES_SHADOW_FEATURE_ONE_SPOT_LIGHT"/>
					<shadowTechnique type="STRING" value="SHADOW_TECHNIQUE_DEFAULT"/>
					<!-- -->
					
					<!-- - ->
					<lightSourcesLightingFeature type="STRING" value="LIGHT_SOURCES_LIGHTING_FEATURE_ALL_POINT_OR_SPOT_LIGHTS"/>
					<lightSourcesShadowFeature type="STRING" value="LIGHT_SOURCES_SHADOW_FEATURE_NONE"/>
					<shadowTechnique type="STRING" value="SHADOW_TECHNIQUE_NONE"/>
					<!- - -->
					 
					<numMaxLightSources type="INT" value="5"/>
					<numMaxShadowCasters type="INT" value="1"/>
					<numMaxInstancesRenderable type="INT" value="300"/>
					<GBufferType type="STRING" value="TEXTURE_TYPE_2D_RECT"/>	
					
					<shaderCodeDirectory type="STRING" value="./src/MPP/Shader/ShaderSources/" />		
				</GlobalShadingFeatures>

			</generalSettings>

			
			<!--
			<SimulationPipelineStage>
				<Type type="STRING" value="SkyBoxRenderer"/>
				
				<cubeMapName type="STRING" value="cloudy_noon" />
				<cubeMapFileEnding type="STRING" value="jpg" />

			</SimulationPipelineStage>
			--> 
				
			<!-- -->		
			<SimulationPipelineStage>
				<Type type="STRING" value="ShadowMapGenerator"/>
        		<shadowMapResolution type="INT" value="4096" />
       			<polygonOffset type="VEC2" x="2.5" y="5.8"/>
			</SimulationPipelineStage> 
			<!-- -->	
					
			<SimulationPipelineStage>
				<Type type="STRING" value="DefaultLightingStage"/>
				
				<renderToScreen type="STRING" value="true" />  <!-- indicator not to render to the main FBO -->

			</SimulationPipelineStage>
						


			<!-- Fluid rendering specific stages to go -->
			
		</Simulator>


	</simulators>




</flewnitGlobalConfig>
